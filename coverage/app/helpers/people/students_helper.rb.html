<html>
  <head>
    <title>app/helpers/people/students_helper.rb</title>
    
    <link href="../../../report.css?0.4462523051205438" media="screen" rel="stylesheet" type="text/css" />
    <script src='../../../jquery.js?0.7104880495079698'></script>
    <script>
      $(function() {

        $('#toggle_test_file').click(function(e) {
          e.preventDefault();
          if ($('#main_file').hasClass('side_by_side')) {
            $('#main_file').removeClass('side_by_side');
          } else {
            $('#main_file').addClass('side_by_side');
          }
        
          $('#test_file').toggle();
        });

        $('#test_file').hide();
        
        function cleanString(str) {
          return $.trim(str.replace(/<[^(<|>)]+>/gi, ''));
        }
        
        $('.line_number').hover(function() {
          $(this).attr('title', 'Line: ' + cleanString($(this).html()));
        });
        
        $('.hit_number').hover(function() {
          $(this).attr('title', 'Execution Count: ' + cleanString($(this).html()));
        });
        
        $('.code_line').hover(function() {
          $(this).attr('title', cleanString($(this).html()));
        });
        
      });
    </script>
  </head>
  <body>
    <h1><a href="../../../index.html">Coverage Report</a></h1>
    
    <table cellpadding='0' cellspacing='1'>
      <tr class='header'>
        <th>File</th>
        <th>Lines</th>
        <th>Lines Of Code</th>
        <th>Tested %</th>
      </tr>
      <tr valign='top'>
        <td>
          app/helpers/people/students_helper.rb
          
        </td>
        <td>183</td>
        <td>115</td>
        <td>80.0%</td>
      </tr>
    </table>

    <div>&nbsp;</div>
    
    <table cellpadding='0' cellspacing='1'>
      <tr>
        <th>Legend</th>
      </tr>
      <tr>
        <td class='hit'>This line was executed.</td>
      </tr>
      <tr>
        <td class='miss'>This line was not executed!</td>
      </tr>
      <tr>
        <td class='never'>This line doesn't matter.</td>
      </tr>
    </table>
    
    <div>&nbsp;</div>

    <div id='content'>
      <div id='main_file'>
        <table id='main'>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>1</td>
              <td class='code_line'>
                <pre>module People::StudentsHelper</pre>
              </td>
              <td class='hit_number'>18</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>2</td>
              <td class='code_line'>
                <pre></pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>3</td>
              <td class='code_line'>
                <pre>  def absence_calendar(year, month, section, absences)</pre>
              </td>
              <td class='hit_number'>18</td>
            </tr>
          
            <tr class="miss" data-hits='#{cov}'"">
              <td class='line_number'>4</td>
              <td class='code_line'>
                <pre>    calendar({:year => year, :month => month, :table_class => 'sideCalendar', :other_month_class => 'outOfMonth'}) do |d|</pre>
              </td>
              <td class='hit_number'>0</td>
            </tr>
          
            <tr class="miss" data-hits='#{cov}'"">
              <td class='line_number'>5</td>
              <td class='code_line'>
                <pre>      cell_text = ""</pre>
              </td>
              <td class='hit_number'>0</td>
            </tr>
          
            <tr class="miss" data-hits='#{cov}'"">
              <td class='line_number'>6</td>
              <td class='code_line'>
                <pre>      cell_attrs = {:class => 'day'}</pre>
              </td>
              <td class='hit_number'>0</td>
            </tr>
          
            <tr class="miss" data-hits='#{cov}'"">
              <td class='line_number'>7</td>
              <td class='code_line'>
                <pre>      if current_user.teaches?(section)</pre>
              </td>
              <td class='hit_number'>0</td>
            </tr>
          
            <tr class="miss" data-hits='#{cov}'"">
              <td class='line_number'>8</td>
              <td class='code_line'>
                <pre>        cell_text << "#{link_to d.mday, section_attendance_path(section, d), :title => 'Click to see class attendance information for ' + d.strftime("%B %d")}"</pre>
              </td>
              <td class='hit_number'>0</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>9</td>
              <td class='code_line'>
                <pre>      else</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="miss" data-hits='#{cov}'"">
              <td class='line_number'>10</td>
              <td class='code_line'>
                <pre>        cell_text << "#{d.mday}"</pre>
              </td>
              <td class='hit_number'>0</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>11</td>
              <td class='code_line'>
                <pre>      end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="miss" data-hits='#{cov}'"">
              <td class='line_number'>12</td>
              <td class='code_line'>
                <pre>      if absences && a = absences.detect{|a|a.date == d}</pre>
              </td>
              <td class='hit_number'>0</td>
            </tr>
          
            <tr class="miss" data-hits='#{cov}'"">
              <td class='line_number'>13</td>
              <td class='code_line'>
                <pre>        cell_text << " <span class=\"absence\" title=\"#{absence_name(a)}\">#{absence_code(a)}</span>"</pre>
              </td>
              <td class='hit_number'>0</td>
            </tr>
          
            <tr class="miss" data-hits='#{cov}'"">
              <td class='line_number'>14</td>
              <td class='code_line'>
                <pre>        cell_attrs[:class] = 'specialDay'</pre>
              </td>
              <td class='hit_number'>0</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>15</td>
              <td class='code_line'>
                <pre>      end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="miss" data-hits='#{cov}'"">
              <td class='line_number'>16</td>
              <td class='code_line'>
                <pre>      [cell_text, cell_attrs]</pre>
              </td>
              <td class='hit_number'>0</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>17</td>
              <td class='code_line'>
                <pre>    end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>18</td>
              <td class='code_line'>
                <pre>  end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>19</td>
              <td class='code_line'>
                <pre></pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>20</td>
              <td class='code_line'>
                <pre>  def absence_summary(absences)</pre>
              </td>
              <td class='hit_number'>18</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>21</td>
              <td class='code_line'>
                <pre>    day, period = Absence.summary(@student.sections, absences)</pre>
              </td>
              <td class='hit_number'>6</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>22</td>
              <td class='code_line'>
                <pre>    "#{absence_sentence(day, 'day')}<br/>#{absence_sentence(period, 'period')}".html_safe</pre>
              </td>
              <td class='hit_number'>6</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>23</td>
              <td class='code_line'>
                <pre>  end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>24</td>
              <td class='code_line'>
                <pre>  </pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>25</td>
              <td class='code_line'>
                <pre>  def absence_sentence(time, word)</pre>
              </td>
              <td class='hit_number'>18</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>26</td>
              <td class='code_line'>
                <pre>    time.map{|code, n| "#{pluralize(n, word)} of #{@school.absence_codes(false)[code]}"}.to_sentence</pre>
              </td>
              <td class='hit_number'>12</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>27</td>
              <td class='code_line'>
                <pre>  end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>28</td>
              <td class='code_line'>
                <pre></pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>29</td>
              <td class='code_line'>
                <pre>  def attendance_list(student)</pre>
              </td>
              <td class='hit_number'>18</td>
            </tr>
          
            <tr class="miss" data-hits='#{cov}'"">
              <td class='line_number'>30</td>
              <td class='code_line'>
                <pre>    list = ''</pre>
              </td>
              <td class='hit_number'>0</td>
            </tr>
          
            <tr class="miss" data-hits='#{cov}'"">
              <td class='line_number'>31</td>
              <td class='code_line'>
                <pre>    if @low_period.nil?</pre>
              </td>
              <td class='hit_number'>0</td>
            </tr>
          
            <tr class="miss" data-hits='#{cov}'"">
              <td class='line_number'>32</td>
              <td class='code_line'>
                <pre>      student.rollbook_entries.select{|rbe|rbe.section.current}.each{|rbe| list += "<td title=\"#{rbe.section.name}\">#{rbe.absence_on(@date, @school)}</td>"}</pre>
              </td>
              <td class='hit_number'>0</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>33</td>
              <td class='code_line'>
                <pre>    else</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="miss" data-hits='#{cov}'"">
              <td class='line_number'>34</td>
              <td class='code_line'>
                <pre>      sections = user.rollbook_entries.group_by{|rbe|rbe.section.time.to_i}</pre>
              </td>
              <td class='hit_number'>0</td>
            </tr>
          
            <tr class="miss" data-hits='#{cov}'"">
              <td class='line_number'>35</td>
              <td class='code_line'>
                <pre>      @low_period.upto(@high_period) do |n|</pre>
              </td>
              <td class='hit_number'>0</td>
            </tr>
          
            <tr class="miss" data-hits='#{cov}'"">
              <td class='line_number'>36</td>
              <td class='code_line'>
                <pre>        if sections[n].nil? || sections[n].all?{|rbe| !rbe.section.current}</pre>
              </td>
              <td class='hit_number'>0</td>
            </tr>
          
            <tr class="miss" data-hits='#{cov}'"">
              <td class='line_number'>37</td>
              <td class='code_line'>
                <pre>          list << td('&nbsp;') </pre>
              </td>
              <td class='hit_number'>0</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>38</td>
              <td class='code_line'>
                <pre>        else</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="miss" data-hits='#{cov}'"">
              <td class='line_number'>39</td>
              <td class='code_line'>
                <pre>          list += td sections[n].reject{|rbe| !rbe.section.current}.collect{|rbe| "#{rbe.absence_on(@date, @school)}"}.join.strip </pre>
              </td>
              <td class='hit_number'>0</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>40</td>
              <td class='code_line'>
                <pre>        end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>41</td>
              <td class='code_line'>
                <pre>      end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>42</td>
              <td class='code_line'>
                <pre>    end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="miss" data-hits='#{cov}'"">
              <td class='line_number'>43</td>
              <td class='code_line'>
                <pre>    list</pre>
              </td>
              <td class='hit_number'>0</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>44</td>
              <td class='code_line'>
                <pre>  end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>45</td>
              <td class='code_line'>
                <pre></pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>46</td>
              <td class='code_line'>
                <pre>  def default_pwd_used</pre>
              </td>
              <td class='hit_number'>18</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>47</td>
              <td class='code_line'>
                <pre>    (params[:student][:authorization][:password].blank? || params[:student][:authorization][:password] == (params[:student][:first_name] + params[:student][:last_name]).downcase) ? 'and password (both) ' : ''</pre>
              </td>
              <td class='hit_number'>9</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>48</td>
              <td class='code_line'>
                <pre>  end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>49</td>
              <td class='code_line'>
                <pre></pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>50</td>
              <td class='code_line'>
                <pre>  def last_crumb(*link_and_text)</pre>
              </td>
              <td class='hit_number'>18</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>51</td>
              <td class='code_line'>
                <pre>    breadcrumbs students_front, link_and_text</pre>
              </td>
              <td class='hit_number'>24</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>52</td>
              <td class='code_line'>
                <pre>  end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>53</td>
              <td class='code_line'>
                <pre></pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>54</td>
              <td class='code_line'>
                <pre>  def msg(type = :notice)</pre>
              </td>
              <td class='hit_number'>18</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>55</td>
              <td class='code_line'>
                <pre>    msg_head(type) + </pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>56</td>
              <td class='code_line'>
                <pre>    case action_name</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>57</td>
              <td class='code_line'>
                <pre>    when 'create'</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>58</td>
              <td class='code_line'>
                <pre>      p "#{@student.full_name} was added, and can log in with user name #{default_pwd_used}#{@student.login}. Accounts for #{@student.first_name}&#39;s parents were created with username/password <code>#{@student.login}_mother</code> (for #{@student.first_name}&#39;s mother) and <code>#{@student.login}_father</code> (father)."</pre>
              </td>
              <td class='hit_number'>9</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>59</td>
              <td class='code_line'>
                <pre>    when 'destroy'</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>60</td>
              <td class='code_line'>
                <pre>      if type == :notice</pre>
              </td>
              <td class='hit_number'>9</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>61</td>
              <td class='code_line'>
                <pre>        p "#{@student.display_name} was removed from the system. All of that student's class records have been destroyed as well."</pre>
              </td>
              <td class='hit_number'>6</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>62</td>
              <td class='code_line'>
                <pre>      else</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>63</td>
              <td class='code_line'>
                <pre>        p "Something went wrong, and #{@student.display_name} was not deleted."</pre>
              </td>
              <td class='hit_number'>3</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>64</td>
              <td class='code_line'>
                <pre>      end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>65</td>
              <td class='code_line'>
                <pre>    when 'update'</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>66</td>
              <td class='code_line'>
                <pre>      p "#{@student.first_name} was updated."</pre>
              </td>
              <td class='hit_number'>9</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>67</td>
              <td class='code_line'>
                <pre>    end</pre>
              </td>
              <td class='hit_number'>27</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>68</td>
              <td class='code_line'>
                <pre>  end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>69</td>
              <td class='code_line'>
                <pre></pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>70</td>
              <td class='code_line'>
                <pre>  def msg_head(type)</pre>
              </td>
              <td class='hit_number'>18</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>71</td>
              <td class='code_line'>
                <pre>    type == :notice ? h2('Good News') : h2('Bad News')</pre>
              </td>
              <td class='hit_number'>27</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>72</td>
              <td class='code_line'>
                <pre>  end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>73</td>
              <td class='code_line'>
                <pre>  </pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>74</td>
              <td class='code_line'>
                <pre>  def secondary_nav</pre>
              </td>
              <td class='hit_number'>18</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>75</td>
              <td class='code_line'>
                <pre>    case action_name</pre>
              </td>
              <td class='hit_number'>30</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>76</td>
              <td class='code_line'>
                <pre>    when 'index'</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>77</td>
              <td class='code_line'>
                <pre>    when 'show'</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>78</td>
              <td class='code_line'>
                <pre>      last_crumb @student.full_name</pre>
              </td>
              <td class='hit_number'>6</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>79</td>
              <td class='code_line'>
                <pre>    when 'edit', 'update'</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>80</td>
              <td class='code_line'>
                <pre>      last_crumb student_link, 'Edit'</pre>
              </td>
              <td class='hit_number'>6</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>81</td>
              <td class='code_line'>
                <pre>    when 'new', 'create'</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>82</td>
              <td class='code_line'>
                <pre>      last_crumb 'New Student'</pre>
              </td>
              <td class='hit_number'>6</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>83</td>
              <td class='code_line'>
                <pre>    else</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>84</td>
              <td class='code_line'>
                <pre>      last_crumb student_link, action_name.titleize</pre>
              </td>
              <td class='hit_number'>6</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>85</td>
              <td class='code_line'>
                <pre>    end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>86</td>
              <td class='code_line'>
                <pre>  end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>87</td>
              <td class='code_line'>
                <pre></pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>88</td>
              <td class='code_line'>
                <pre>  def student_link</pre>
              </td>
              <td class='hit_number'>18</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>89</td>
              <td class='code_line'>
                <pre>    link_to @student.full_name, student_path(@student), :title => "Click to see an overview of #{@student.first_name}&#39;s academic performance".html_safe</pre>
              </td>
              <td class='hit_number'>12</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>90</td>
              <td class='code_line'>
                <pre>  end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>91</td>
              <td class='code_line'>
                <pre>  </pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>92</td>
              <td class='code_line'>
                <pre>  def students_front</pre>
              </td>
              <td class='hit_number'>18</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>93</td>
              <td class='code_line'>
                <pre>    link_to 'Students', students_path</pre>
              </td>
              <td class='hit_number'>16</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>94</td>
              <td class='code_line'>
                <pre>  end</pre>
              </td>
              <td class='hit_number'>8</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>95</td>
              <td class='code_line'>
                <pre></pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>96</td>
              <td class='code_line'>
                <pre>  def index_header(type,lo,hi)</pre>
              </td>
              <td class='hit_number'>9</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>97</td>
              <td class='code_line'>
                <pre>    index_schedule(type, lo, hi) +</pre>
              </td>
              <td class='hit_number'>9</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>98</td>
              <td class='code_line'>
                <pre>    tr(%w(Name ID Grade).map{|w| th w }.join.html_safe + index_periods(lo,hi))</pre>
              </td>
              <td class='hit_number'>30</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>99</td>
              <td class='code_line'>
                <pre>  end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>100</td>
              <td class='code_line'>
                <pre></pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>101</td>
              <td class='code_line'>
                <pre>  def index_periods(lo, hi)</pre>
              </td>
              <td class='hit_number'>18</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>102</td>
              <td class='code_line'>
                <pre>    (lo..hi).map{|n| th n }.join.html_safe unless lo.nil?</pre>
              </td>
              <td class='hit_number'>30</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>103</td>
              <td class='code_line'>
                <pre>  end</pre>
              </td>
              <td class='hit_number'>2</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>104</td>
              <td class='code_line'>
                <pre></pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>105</td>
              <td class='code_line'>
                <pre>  def index_schedule(type, lo, hi)</pre>
              </td>
              <td class='hit_number'>9</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>106</td>
              <td class='code_line'>
                <pre>    unless lo.nil?</pre>
              </td>
              <td class='hit_number'>4</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>107</td>
              <td class='code_line'>
                <pre>      tr(th(type, :colspan => 3) + th('Schedule', :colspan => (hi - lo + 1)))</pre>
              </td>
              <td class='hit_number'>13</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>108</td>
              <td class='code_line'>
                <pre>    end</pre>
              </td>
              <td class='hit_number'>3</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>109</td>
              <td class='code_line'>
                <pre>  end</pre>
              </td>
              <td class='hit_number'>1</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>110</td>
              <td class='code_line'>
                <pre></pre>
              </td>
              <td class='hit_number'>2</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>111</td>
              <td class='code_line'>
                <pre>  def parent_logins(user)</pre>
              </td>
              <td class='hit_number'>10</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>112</td>
              <td class='code_line'>
                <pre>    if user.last_login</pre>
              </td>
              <td class='hit_number'>6</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>113</td>
              <td class='code_line'>
                <pre>      "<dt>#{user.display_name}</dt><dd> #{user.logins.size} logins (Last at #{user.last_login.strftime("%I:%M%p %A %B %d")})</dd>" </pre>
              </td>
              <td class='hit_number'>3</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>114</td>
              <td class='code_line'>
                <pre>    elsif user.last_name =~ /_/   </pre>
              </td>
              <td class='hit_number'>4</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>115</td>
              <td class='code_line'>
                <pre>      p "#{@student.first_name}\'s #{user.which_parent} has never logged in"</pre>
              </td>
              <td class='hit_number'>2</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>116</td>
              <td class='code_line'>
                <pre>    else</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>117</td>
              <td class='code_line'>
                <pre>      p "#{user.display_name} has never logged in"</pre>
              </td>
              <td class='hit_number'>11</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>118</td>
              <td class='code_line'>
                <pre>    end</pre>
              </td>
              <td class='hit_number'>2</td>
            </tr>
          
            <tr class="miss" data-hits='#{cov}'"">
              <td class='line_number'>119</td>
              <td class='code_line'>
                <pre>  end</pre>
              </td>
              <td class='hit_number'>0</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>120</td>
              <td class='code_line'>
                <pre></pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>121</td>
              <td class='code_line'>
                <pre>  def student_logins(student)</pre>
              </td>
              <td class='hit_number'>11</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>122</td>
              <td class='code_line'>
                <pre>    if student.last_login</pre>
              </td>
              <td class='hit_number'>4</td>
            </tr>
          
            <tr class="miss" data-hits='#{cov}'"">
              <td class='line_number'>123</td>
              <td class='code_line'>
                <pre>      "<dd> #{student.logins.size} (Last at #{student.last_login.strftime("%I:%M%p %A %B %d")})</dd>"</pre>
              </td>
              <td class='hit_number'>0</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>124</td>
              <td class='code_line'>
                <pre>    else</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>125</td>
              <td class='code_line'>
                <pre>      p "#{student.first_name} has never logged in" </pre>
              </td>
              <td class='hit_number'>13</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>126</td>
              <td class='code_line'>
                <pre>    end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>127</td>
              <td class='code_line'>
                <pre>  end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>128</td>
              <td class='code_line'>
                <pre>  </pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>129</td>
              <td class='code_line'>
                <pre>  def section_title(section)</pre>
              </td>
              <td class='hit_number'>9</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>130</td>
              <td class='code_line'>
                <pre>    h2([teacher_link(section.teacher, current_user.admin?),</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>131</td>
              <td class='code_line'>
                <pre>        link_to_if(current_user.may_see?(section), </pre>
              </td>
              <td class='hit_number'>3</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>132</td>
              <td class='code_line'>
                <pre>                   section.name_and_time(false), section_path(section), </pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>133</td>
              <td class='code_line'>
                <pre>                   :title => "See class-level data for #{@student.first_name}&#39;s #{section.name} class".html_safe),</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>134</td>
              <td class='code_line'>
                <pre>        section_student_link(section, @student, @student.first_name)</pre>
              </td>
              <td class='hit_number'>9</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>135</td>
              <td class='code_line'>
                <pre>       ].join(arrow).html_safe)</pre>
              </td>
              <td class='hit_number'>7</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>136</td>
              <td class='code_line'>
                <pre>  end</pre>
              </td>
              <td class='hit_number'>1</td>
            </tr>
          
            <tr class="miss" data-hits='#{cov}'"">
              <td class='line_number'>137</td>
              <td class='code_line'>
                <pre></pre>
              </td>
              <td class='hit_number'>0</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>138</td>
              <td class='code_line'>
                <pre>  def section_links(user)</pre>
              </td>
              <td class='hit_number'>9</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>139</td>
              <td class='code_line'>
                <pre>    links = ''</pre>
              </td>
              <td class='hit_number'>3</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>140</td>
              <td class='code_line'>
                <pre>    if @low_period.nil?</pre>
              </td>
              <td class='hit_number'>3</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>141</td>
              <td class='code_line'>
                <pre>      user.rollbook_entries.select{|rbe|rbe.section.current == @term}.each{|rbe| links += "<td>#{section_student_link(rbe.section, rbe.student, rbe.section.name)}</td>"}</pre>
              </td>
              <td class='hit_number'>6</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>142</td>
              <td class='code_line'>
                <pre>    else</pre>
              </td>
              <td class='hit_number'>6</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>143</td>
              <td class='code_line'>
                <pre>      sections = user.rollbook_entries.group_by{|rbe|rbe.section.time.to_i}</pre>
              </td>
              <td class='hit_number'>2</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>144</td>
              <td class='code_line'>
                <pre>      @low_period.upto(@high_period) do |n|</pre>
              </td>
              <td class='hit_number'>2</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>145</td>
              <td class='code_line'>
                <pre>        if sections[n].nil? || sections[n].all?{|rbe|rbe.section.current != @condition}</pre>
              </td>
              <td class='hit_number'>12</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>146</td>
              <td class='code_line'>
                <pre>          links << td('Prep')</pre>
              </td>
              <td class='hit_number'>12</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>147</td>
              <td class='code_line'>
                <pre>        else</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>148</td>
              <td class='code_line'>
                <pre>          links += '<td>' + sections[n].reject{|rbe|rbe.section.current != @condition}.collect{|rbe| "#{section_student_link(rbe.section, user, rbe.section.name)}"}.join('<br/>') + '</td>'</pre>
              </td>
              <td class='hit_number'>1</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>149</td>
              <td class='code_line'>
                <pre>        end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>150</td>
              <td class='code_line'>
                <pre>      end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>151</td>
              <td class='code_line'>
                <pre>    end</pre>
              </td>
              <td class='hit_number'>9</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>152</td>
              <td class='code_line'>
                <pre>    links.html_safe</pre>
              </td>
              <td class='hit_number'>3</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>153</td>
              <td class='code_line'>
                <pre>  end</pre>
              </td>
              <td class='hit_number'>1</td>
            </tr>
          
            <tr class="miss" data-hits='#{cov}'"">
              <td class='line_number'>154</td>
              <td class='code_line'>
                <pre></pre>
              </td>
              <td class='hit_number'>0</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>155</td>
              <td class='code_line'>
                <pre>  def section_list(user)</pre>
              </td>
              <td class='hit_number'>9</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>156</td>
              <td class='code_line'>
                <pre>    list = ''</pre>
              </td>
              <td class='hit_number'>3</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>157</td>
              <td class='code_line'>
                <pre>    if @low_period.nil?</pre>
              </td>
              <td class='hit_number'>3</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>158</td>
              <td class='code_line'>
                <pre>      user.rollbook_entries.select{|rbe|rbe.section.current == @term}.each{|rbe| list += "<td>#{rbe.section.name}</td>"}</pre>
              </td>
              <td class='hit_number'>6</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>159</td>
              <td class='code_line'>
                <pre>    else</pre>
              </td>
              <td class='hit_number'>6</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>160</td>
              <td class='code_line'>
                <pre>      sections = user.rollbook_entries.group_by{|rbe|rbe.section.time.to_i}</pre>
              </td>
              <td class='hit_number'>2</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>161</td>
              <td class='code_line'>
                <pre>      @low_period.upto(@high_period) do |n|</pre>
              </td>
              <td class='hit_number'>2</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>162</td>
              <td class='code_line'>
                <pre>        if sections[n].nil? || sections[n].all?{|rbe|rbe.section.current != @condition}</pre>
              </td>
              <td class='hit_number'>12</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>163</td>
              <td class='code_line'>
                <pre>          list << '<td>Prep</td>'</pre>
              </td>
              <td class='hit_number'>12</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>164</td>
              <td class='code_line'>
                <pre>        else</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>165</td>
              <td class='code_line'>
                <pre>          list += '<td>' + sections[n].reject{|rbe|rbe.section.current != @condition}.collect{|rbe| "#{rbe.section.name}"}.join('<br/>') + '</td>'</pre>
              </td>
              <td class='hit_number'>1</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>166</td>
              <td class='code_line'>
                <pre>        end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>167</td>
              <td class='code_line'>
                <pre>      end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>168</td>
              <td class='code_line'>
                <pre>    end</pre>
              </td>
              <td class='hit_number'>9</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>169</td>
              <td class='code_line'>
                <pre>    list</pre>
              </td>
              <td class='hit_number'>4</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>170</td>
              <td class='code_line'>
                <pre>  end</pre>
              </td>
              <td class='hit_number'>1</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>171</td>
              <td class='code_line'>
                <pre></pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>172</td>
              <td class='code_line'>
                <pre>  def teacher_or_your</pre>
              </td>
              <td class='hit_number'>10</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>173</td>
              <td class='code_line'>
                <pre>    if current_user.admin?</pre>
              </td>
              <td class='hit_number'>4</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>174</td>
              <td class='code_line'>
                <pre>      "the #{link_to "teacher page", teachers_path}, click on the class name,".html_safe </pre>
              </td>
              <td class='hit_number'>2</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>175</td>
              <td class='code_line'>
                <pre>    else</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>176</td>
              <td class='code_line'>
                <pre>      "one of your #{link_to 'class pages', sections_path}".html_safe</pre>
              </td>
              <td class='hit_number'>11</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>177</td>
              <td class='code_line'>
                <pre>    end</pre>
              </td>
              <td class='hit_number'>10</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>178</td>
              <td class='code_line'>
                <pre>  end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>179</td>
              <td class='code_line'>
                <pre></pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>180</td>
              <td class='code_line'>
                <pre>  def title</pre>
              </td>
              <td class='hit_number'>9</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>181</td>
              <td class='code_line'>
                <pre>    @page_h1 ? "#{@page_h1} | Students" : 'Students'</pre>
              </td>
              <td class='hit_number'>22</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>182</td>
              <td class='code_line'>
                <pre>  end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>183</td>
              <td class='code_line'>
                <pre>end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
        </table>
      </div>
      
    </div>
    
    <p>Generated on: 2011-02-26 21:12:41 -0500</p>
  </body>
</html>