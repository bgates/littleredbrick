<html>
  <head>
    <title>app/controllers/upload/users_controller.rb</title>
    
    <link href="../../../report.css?0.5449635059128173" media="screen" rel="stylesheet" type="text/css" />
    <script src='../../../jquery.js?0.34415374275525223'></script>
    <script>
      $(function() {

        $('#toggle_test_file').click(function(e) {
          e.preventDefault();
          if ($('#main_file').hasClass('side_by_side')) {
            $('#main_file').removeClass('side_by_side');
          } else {
            $('#main_file').addClass('side_by_side');
          }
        
          $('#test_file').toggle();
        });

        $('#test_file').hide();
        
        function cleanString(str) {
          return $.trim(str.replace(/<[^(<|>)]+>/gi, ''));
        }
        
        $('.line_number').hover(function() {
          $(this).attr('title', 'Line: ' + cleanString($(this).html()));
        });
        
        $('.hit_number').hover(function() {
          $(this).attr('title', 'Execution Count: ' + cleanString($(this).html()));
        });
        
        $('.code_line').hover(function() {
          $(this).attr('title', cleanString($(this).html()));
        });
        
      });
    </script>
  </head>
  <body>
    <h1><a href="../../../index.html">Coverage Report</a></h1>
    
    <table cellpadding='0' cellspacing='1'>
      <tr class='header'>
        <th>File</th>
        <th>Lines</th>
        <th>Lines Of Code</th>
        <th>Tested %</th>
      </tr>
      <tr valign='top'>
        <td>
          app/controllers/upload/users_controller.rb
          
        </td>
        <td>48</td>
        <td>33</td>
        <td>100.0%</td>
      </tr>
    </table>

    <div>&nbsp;</div>
    
    <table cellpadding='0' cellspacing='1'>
      <tr>
        <th>Legend</th>
      </tr>
      <tr>
        <td class='hit'>This line was executed.</td>
      </tr>
      <tr>
        <td class='miss'>This line was not executed!</td>
      </tr>
      <tr>
        <td class='never'>This line doesn't matter.</td>
      </tr>
    </table>
    
    <div>&nbsp;</div>

    <div id='content'>
      <div id='main_file'>
        <table id='main'>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>1</td>
              <td class='code_line'>
                <pre>class Upload::UsersController < UploadController</pre>
              </td>
              <td class='hit_number'>12</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>2</td>
              <td class='code_line'>
                <pre>  before_filter :find_type</pre>
              </td>
              <td class='hit_number'>12</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>3</td>
              <td class='code_line'>
                <pre>  include AccountUploadHandler</pre>
              </td>
              <td class='hit_number'>12</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>4</td>
              <td class='code_line'>
                <pre></pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>5</td>
              <td class='code_line'>
                <pre>  protected</pre>
              </td>
              <td class='hit_number'>12</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>6</td>
              <td class='code_line'>
                <pre></pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>7</td>
              <td class='code_line'>
                <pre>  def import</pre>
              </td>
              <td class='hit_number'>12</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>8</td>
              <td class='code_line'>
                <pre>    @upload = AccountUpload.open("#{current_user.id}_#{@type}#{params[:extension]}")</pre>
              </td>
              <td class='hit_number'>24</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>9</td>
              <td class='code_line'>
                <pre>    unless names_accounted_for?</pre>
              </td>
              <td class='hit_number'>24</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>10</td>
              <td class='code_line'>
                <pre>      flash.now[:error] = "<h2>Problem</h2>In order to create #{@type} accounts from a spreadsheet file, the file must have both first and last names. Use the select boxes at the bottom of the table to indicate which columns have names in them."</pre>
              </td>
              <td class='hit_number'>3</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>11</td>
              <td class='code_line'>
                <pre>      @data = @upload.data</pre>
              </td>
              <td class='hit_number'>3</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>12</td>
              <td class='code_line'>
                <pre>      set_controller_specific_vars</pre>
              </td>
              <td class='hit_number'>3</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>13</td>
              <td class='code_line'>
                <pre>      render :action => "describe_file" and return</pre>
              </td>
              <td class='hit_number'>3</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>14</td>
              <td class='code_line'>
                <pre>    end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>15</td>
              <td class='code_line'>
                <pre>    @saveable, @new_people, @substitutes = accounts_from_upload</pre>
              </td>
              <td class='hit_number'>21</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>16</td>
              <td class='code_line'>
                <pre>    @new_people += @substitutes</pre>
              </td>
              <td class='hit_number'>21</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>17</td>
              <td class='code_line'>
                <pre>    return_path = session[:initial] ? home_path : send("#{@type}_path")</pre>
              </td>
              <td class='hit_number'>21</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>18</td>
              <td class='code_line'>
                <pre>    if @new_people.empty? </pre>
              </td>
              <td class='hit_number'>21</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>19</td>
              <td class='code_line'>
                <pre>      flash[:import] = {:type => @type, :number => @saveable.length}</pre>
              </td>
              <td class='hit_number'>12</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>20</td>
              <td class='code_line'>
                <pre>      redirect_to return_path, :notice => msg</pre>
              </td>
              <td class='hit_number'>12</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>21</td>
              <td class='code_line'>
                <pre>    else</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>22</td>
              <td class='code_line'>
                <pre>      flash[:pending_import] = params</pre>
              </td>
              <td class='hit_number'>9</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>23</td>
              <td class='code_line'>
                <pre>      @page_title = "Correct Duplicate Logins"</pre>
              </td>
              <td class='hit_number'>9</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>24</td>
              <td class='code_line'>
                <pre>      render :template => "people/enter/details"</pre>
              </td>
              <td class='hit_number'>9</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>25</td>
              <td class='code_line'>
                <pre>    end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>26</td>
              <td class='code_line'>
                <pre>  end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>27</td>
              <td class='code_line'>
                <pre> </pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>28</td>
              <td class='code_line'>
                <pre>  def controller_specific_msg</pre>
              </td>
              <td class='hit_number'>12</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>29</td>
              <td class='code_line'>
                <pre>    'Please identify the kind of data in each column.'</pre>
              </td>
              <td class='hit_number'>12</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>30</td>
              <td class='code_line'>
                <pre>  end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>31</td>
              <td class='code_line'>
                <pre></pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>32</td>
              <td class='code_line'>
                <pre>  def find_type</pre>
              </td>
              <td class='hit_number'>12</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>33</td>
              <td class='code_line'>
                <pre>    @type = params[:id]</pre>
              </td>
              <td class='hit_number'>45</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>34</td>
              <td class='code_line'>
                <pre>    @type = 'students' unless %w(teachers students staffers).include? @type</pre>
              </td>
              <td class='hit_number'>45</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>35</td>
              <td class='code_line'>
                <pre>    @school = School.find(@school.id)</pre>
              </td>
              <td class='hit_number'>45</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>36</td>
              <td class='code_line'>
                <pre>    @low, @hi = @school.low_grade, @school.high_grade</pre>
              </td>
              <td class='hit_number'>45</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>37</td>
              <td class='code_line'>
                <pre>  end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>38</td>
              <td class='code_line'>
                <pre></pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>39</td>
              <td class='code_line'>
                <pre>  def names_accounted_for?</pre>
              </td>
              <td class='hit_number'>12</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>40</td>
              <td class='code_line'>
                <pre>    v = params[:import].values</pre>
              </td>
              <td class='hit_number'>24</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>41</td>
              <td class='code_line'>
                <pre>    (v.include?('last_name') && v.include?('first_name')) || </pre>
              </td>
              <td class='hit_number'>24</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>42</td>
              <td class='code_line'>
                <pre>     v.include?('full_name') || v.include?('last_first')</pre>
              </td>
              <td class='hit_number'>24</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>43</td>
              <td class='code_line'>
                <pre>  end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>44</td>
              <td class='code_line'>
                <pre></pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>45</td>
              <td class='code_line'>
                <pre>  def set_controller_specific_vars</pre>
              </td>
              <td class='hit_number'>12</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>46</td>
              <td class='code_line'>
                <pre>    @columns = %w(First\ Name Last\ Name Name(last,first) Full\ Name ID) </pre>
              </td>
              <td class='hit_number'>15</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>47</td>
              <td class='code_line'>
                <pre>  end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>48</td>
              <td class='code_line'>
                <pre>end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
        </table>
      </div>
      
    </div>
    
    <p>Generated on: 2011-02-26 21:12:42 -0500</p>
  </body>
</html>